<!-- Homing Wizard - Step-by-step guided axis homing -->
<div class="page-content">
    <div class="page-header">
        <h2>üè† Homing Wizard</h2>
        <p>Step-by-step guided axis homing procedure</p>
    </div>

    <!-- Safety Warning -->
    <div class="card" style="border-left: 4px solid var(--color-warning); margin-bottom: 20px;">
        <div class="card-content">
            <h3 style="color: var(--color-warning); margin-bottom: 10px;">‚ö†Ô∏è Safety Warning</h3>
            <ul style="margin: 0; padding-left: 20px; font-size: var(--font-size-sm);">
                <li>Ensure the work area is clear before homing</li>
                <li>Keep hands away from moving parts</li>
                <li>E-Stop is available at any time</li>
                <li>Machine will move to limits during homing</li>
            </ul>
        </div>
    </div>

    <!-- Wizard Progress -->
    <div class="card" style="margin-bottom: 20px;">
        <div class="card-content">
            <div id="wizard-progress" style="display: flex; justify-content: space-between; margin-bottom: 20px;">
                <div class="wizard-step" data-step="1">
                    <div class="step-circle active">1</div>
                    <span>Pre-check</span>
                </div>
                <div class="wizard-step" data-step="2">
                    <div class="step-circle">2</div>
                    <span>Z-Axis</span>
                </div>
                <div class="wizard-step" data-step="3">
                    <div class="step-circle">3</div>
                    <span>X-Axis</span>
                </div>
                <div class="wizard-step" data-step="4">
                    <div class="step-circle">4</div>
                    <span>Y-Axis</span>
                </div>
                <div class="wizard-step" data-step="5">
                    <div class="step-circle">5</div>
                    <span>Complete</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Step Content -->
    <div class="card">
        <div class="card-content">
            <!-- Step 1: Pre-check -->
            <div id="step-1" class="wizard-content active">
                <h3 style="margin-bottom: 15px;">Step 1: Pre-Homing Checklist</h3>
                <div style="margin-bottom: 20px;">
                    <label style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                        <input type="checkbox" id="check-clear" class="precheck">
                        <span>Work area is clear of obstructions</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                        <input type="checkbox" id="check-spindle" class="precheck">
                        <span>Spindle is OFF</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                        <input type="checkbox" id="check-estop" class="precheck">
                        <span>E-Stop button is accessible</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                        <input type="checkbox" id="check-vfd" class="precheck">
                        <span>VFD is powered and ready</span>
                    </label>
                </div>
                <div id="precheck-status"
                    style="padding: 10px; border-radius: 8px; background: var(--bg-secondary); margin-bottom: 15px;">
                    Complete all checks to proceed
                </div>
                <button class="btn btn-primary" id="btn-start-homing" disabled>Begin Homing Sequence ‚Üí</button>
            </div>

            <!-- Step 2: Z-Axis -->
            <div id="step-2" class="wizard-content" style="display: none;">
                <h3 style="margin-bottom: 15px;">Step 2: Home Z-Axis (Height)</h3>
                <p style="margin-bottom: 15px; color: var(--text-secondary);">
                    Z-axis will move UP to find the upper limit. This prevents blade collision.
                </p>
                <div id="z-status" class="axis-status"
                    style="padding: 15px; background: var(--bg-secondary); border-radius: 8px; margin-bottom: 15px;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <span>Z-Axis Status:</span>
                        <span id="z-state" class="badge">Ready</span>
                    </div>
                    <div style="margin-top: 10px;">
                        Current Position: <strong id="z-pos">0.00</strong> mm
                    </div>
                </div>
                <div style="display: flex; gap: 10px;">
                    <button class="btn btn-primary" id="btn-home-z">üè† Home Z-Axis</button>
                    <button class="btn btn-ghost" id="btn-skip-z">Skip</button>
                </div>
            </div>

            <!-- Step 3: X-Axis -->
            <div id="step-3" class="wizard-content" style="display: none;">
                <h3 style="margin-bottom: 15px;">Step 3: Home X-Axis (Bridge)</h3>
                <p style="margin-bottom: 15px; color: var(--text-secondary);">
                    X-axis will move to find the home position.
                </p>
                <div id="x-status" class="axis-status"
                    style="padding: 15px; background: var(--bg-secondary); border-radius: 8px; margin-bottom: 15px;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <span>X-Axis Status:</span>
                        <span id="x-state" class="badge">Ready</span>
                    </div>
                    <div style="margin-top: 10px;">
                        Current Position: <strong id="x-pos">0.00</strong> mm
                    </div>
                </div>
                <div style="display: flex; gap: 10px;">
                    <button class="btn btn-primary" id="btn-home-x">üè† Home X-Axis</button>
                    <button class="btn btn-ghost" id="btn-skip-x">Skip</button>
                </div>
            </div>

            <!-- Step 4: Y-Axis -->
            <div id="step-4" class="wizard-content" style="display: none;">
                <h3 style="margin-bottom: 15px;">Step 4: Home Y-Axis (Carriage)</h3>
                <p style="margin-bottom: 15px; color: var(--text-secondary);">
                    Y-axis will move to find the home position.
                </p>
                <div id="y-status" class="axis-status"
                    style="padding: 15px; background: var(--bg-secondary); border-radius: 8px; margin-bottom: 15px;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <span>Y-Axis Status:</span>
                        <span id="y-state" class="badge">Ready</span>
                    </div>
                    <div style="margin-top: 10px;">
                        Current Position: <strong id="y-pos">0.00</strong> mm
                    </div>
                </div>
                <div style="display: flex; gap: 10px;">
                    <button class="btn btn-primary" id="btn-home-y">üè† Home Y-Axis</button>
                    <button class="btn btn-ghost" id="btn-skip-y">Skip</button>
                </div>
            </div>

            <!-- Step 5: Complete -->
            <div id="step-5" class="wizard-content" style="display: none;">
                <h3 style="margin-bottom: 15px; color: var(--color-success);">‚úÖ Homing Complete!</h3>
                <p style="margin-bottom: 20px;">
                    All axes have been homed successfully. The machine is ready for operation.
                </p>
                <div style="padding: 15px; background: var(--bg-secondary); border-radius: 8px; margin-bottom: 20px;">
                    <h4 style="margin-bottom: 10px;">Final Positions:</h4>
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; text-align: center;">
                        <div>
                            <div style="font-size: var(--font-size-sm); color: var(--text-secondary);">X-Axis</div>
                            <div style="font-size: 1.5em; font-weight: bold;" id="final-x">0.00</div>
                        </div>
                        <div>
                            <div style="font-size: var(--font-size-sm); color: var(--text-secondary);">Y-Axis</div>
                            <div style="font-size: 1.5em; font-weight: bold;" id="final-y">0.00</div>
                        </div>
                        <div>
                            <div style="font-size: var(--font-size-sm); color: var(--text-secondary);">Z-Axis</div>
                            <div style="font-size: 1.5em; font-weight: bold;" id="final-z">0.00</div>
                        </div>
                    </div>
                </div>
                <div style="display: flex; gap: 10px;">
                    <button class="btn btn-primary" id="btn-go-dashboard">Go to Dashboard</button>
                    <button class="btn btn-ghost" id="btn-restart-wizard">Start Over</button>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .wizard-step {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 5px;
        font-size: var(--font-size-sm);
        color: var(--text-secondary);
    }

    .step-circle {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        background: var(--bg-secondary);
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        border: 2px solid var(--border-color);
        transition: all 0.3s ease;
    }

    .step-circle.active {
        background: var(--color-primary);
        border-color: var(--color-primary);
        color: white;
    }

    .step-circle.complete {
        background: var(--color-success);
        border-color: var(--color-success);
        color: white;
    }

    .wizard-content {
        min-height: 200px;
    }

    .badge {
        padding: 4px 12px;
        border-radius: 20px;
        font-size: var(--font-size-sm);
        background: var(--bg-tertiary);
    }

    .badge.homing {
        background: var(--color-warning);
        color: black;
    }

    .badge.complete {
        background: var(--color-success);
        color: white;
    }

    .badge.error {
        background: var(--color-error);
        color: white;
    }
</style>