<!--
  settings.html - User preferences, alerts config, motion params, and system settings
-->
<div class="settings-page">
    <div class="card-grid">
        <!-- Theme Settings Card -->
        <div class="card">
            <div class="card-header">
                <h2 data-i18n="settings.appearance">Appearance</h2>
            </div>
            <div class="card-content">
                <div class="setting-group">
                    <label id="theme-label" data-i18n="settings.theme_label">Theme:</label>
                    <div class="theme-selector" role="radiogroup" aria-labelledby="theme-label">
                        <button class="theme-option" data-theme="light" title="Light Theme">
                            <div class="theme-preview light"></div>
                            <span data-i18n="settings.light">Light</span>
                        </button>
                        <button class="theme-option" data-theme="dark" title="Dark Theme">
                            <div class="theme-preview dark"></div>
                            <span data-i18n="settings.dark">Dark</span>
                        </button>
                        <button class="theme-option" data-theme="high-contrast" title="High Contrast">
                            <div class="theme-preview high-contrast"></div>
                            <span data-i18n="settings.high_contrast">High Contrast</span>
                        </button>
                        <button class="theme-option" data-theme="colorblind" title="Colorblind Mode">
                            <div class="theme-preview colorblind"></div>
                            <span data-i18n="settings.colorblind">Colorblind</span>
                        </button>
                    </div>
                </div>

                <div class="setting-group">
                    <label for="font-size-slider"><span data-i18n="settings.font_size">Font Size</span>: <span
                            id="font-size-display">100</span>%</label>
                    <div class="slider-container">
                        <input type="range" id="font-size-slider" min="80" max="120" value="100" class="slider">
                        <div class="slider-labels">
                            <span data-i18n="settings.smaller">Smaller</span>
                            <span data-i18n="settings.larger">Larger</span>
                        </div>
                    </div>
                </div>

                <div class="setting-group">
                    <input type="checkbox" id="auto-refresh-toggle" checked>
                    <label for="auto-refresh-toggle" data-i18n="settings.auto_refresh">Auto-refresh data (every 1
                        second)</label>
                </div>
            </div>
        </div>

        <!-- Alert Settings Card -->
        <div class="card">
            <div class="card-header">
                <h2 data-i18n="settings.alert_thresholds">Alert Thresholds</h2>
            </div>
            <div class="card-content">
                <div class="setting-group">
                    <label for="quality-threshold" data-i18n="settings.min_quality">Min. Quality Score Before
                        Alert:</label>
                    <div class="input-with-value">
                        <input type="range" id="quality-threshold" min="0" max="100" value="50" class="slider">
                        <span class="input-value"><span id="quality-value">50</span>%</span>
                    </div>
                </div>

                <div class="setting-group">
                    <label for="jitter-threshold" data-i18n="settings.max_jitter">Max. Jitter Amplitude Before
                        Alert:</label>
                    <div class="input-with-value">
                        <input type="range" id="jitter-threshold" min="0" max="5" step="0.1" value="1.0" class="slider">
                        <span class="input-value"><span id="jitter-value">1.0</span> mm/s</span>
                    </div>
                </div>

                <div class="setting-group">
                    <label for="temp-threshold" data-i18n="settings.max_vfd_temp">Max. VFD Temperature Before
                        Alert:</label>
                    <div class="input-with-value">
                        <input type="range" id="temp-threshold" min="30" max="100" value="80" class="slider">
                        <span class="input-value"><span id="temp-value">80</span>%</span>
                    </div>
                </div>

                <div class="setting-group">
                    <input type="checkbox" id="alert-sound-toggle" checked>
                    <label for="alert-sound-toggle" data-i18n="settings.sound_alerts">Sound alerts enabled</label>
                </div>

                <div class="setting-group">
                    <input type="checkbox" id="alert-desktop-toggle" checked>
                    <label for="alert-desktop-toggle" data-i18n="settings.desktop_alerts">Desktop notifications
                        enabled</label>
                </div>

                <button class="btn btn-secondary" id="test-alert-btn" data-i18n="settings.test_alert_btn">Test Alert
                    Sound</button>
            </div>
        </div>

        <!-- Data Settings Card -->
        <div class="card">
            <div class="card-header">
                <h2 data-i18n="settings.data_mgmt">Data Management</h2>
            </div>
            <div class="card-content">
                <div class="setting-group">
                    <label for="history-retention" data-i18n="settings.history_retention">History Retention:</label>
                    <select id="history-retention" class="form-control">
                        <option value="24" data-i18n="dashboard.last_24h">Last 24 hours</option>
                        <option value="168" data-i18n="dashboard.last_7d">Last 7 days</option>
                        <option value="720" data-i18n="dashboard.last_30d">Last 30 days</option>
                        <option value="8760" data-i18n="dashboard.last_1y">Last 1 year</option>
                    </select>
                </div>

                <div class="setting-group">
                    <label for="chart-resolution" data-i18n="settings.chart_resolution">Chart Resolution:</label>
                    <select id="chart-resolution" class="form-control">
                        <option value="1">Every 1 minute</option>
                        <option value="5">Every 5 minutes</option>
                        <option value="15">Every 15 minutes</option>
                        <option value="60">Every 1 hour</option>
                    </select>
                </div>

                <div class="storage-info">
                    <div class="storage-stat">
                        <span class="info-label" data-i18n="settings.local_storage">Local Storage Used:</span>
                        <span id="storage-used">0</span> KB / <span id="storage-limit">5120</span> KB
                    </div>
                    <div class="storage-bar">
                        <div class="storage-fill" id="storage-fill" style="width: 0%;"></div>
                    </div>
                </div>

                <div class="setting-group">
                    <button class="btn btn-warning" id="clear-cache-btn" data-i18n="settings.clear_cache">Clear Cache &
                        History</button>
                    <button class="btn btn-danger" id="factory-reset-btn" data-i18n="settings.factory_reset">Factory
                        Reset</button>
                </div>
            </div>
        </div>

        <!-- Motion Control Card -->
        <div class="card">
            <div class="card-header">
                <h2 data-i18n="settings.motion_control">Motion Control</h2>
                <span class="card-status" id="motion-status"></span>
            </div>
            <div class="card-content">
                <div class="axis-group">
                    <h3 data-i18n="settings.x_limits">X-Axis Soft Limits (mm)</h3>
                    <div class="setting-group">
                        <label for="x-limit-low" data-i18n="settings.lower_limit">Lower Limit:</label>
                        <input type="number" id="x-limit-low" min="0" max="1000" class="form-control">
                    </div>
                    <div class="setting-group">
                        <label for="x-limit-high" data-i18n="settings.upper_limit">Upper Limit:</label>
                        <input type="number" id="x-limit-high" min="0" max="1000" class="form-control">
                    </div>
                </div>

                <div class="axis-group">
                    <h3 data-i18n="settings.y_limits">Y-Axis Soft Limits (mm)</h3>
                    <div class="setting-group">
                        <label for="y-limit-low" data-i18n="settings.lower_limit">Lower Limit:</label>
                        <input type="number" id="y-limit-low" min="0" max="1000" class="form-control">
                    </div>
                    <div class="setting-group">
                        <label for="y-limit-high" data-i18n="settings.upper_limit">Upper Limit:</label>
                        <input type="number" id="y-limit-high" min="0" max="1000" class="form-control">
                    </div>
                </div>

                <div class="axis-group">
                    <h3 data-i18n="settings.z_limits">Z-Axis Soft Limits (mm)</h3>
                    <div class="setting-group">
                        <label for="z-limit-low" data-i18n="settings.lower_limit">Lower Limit:</label>
                        <input type="number" id="z-limit-low" min="0" max="1000" class="form-control">
                    </div>
                    <div class="setting-group">
                        <label for="z-limit-high" data-i18n="settings.upper_limit">Upper Limit:</label>
                        <input type="number" id="z-limit-high" min="0" max="1000" class="form-control">
                    </div>
                </div>

                <div class="setting-group">
                    <button class="btn btn-primary" id="save-motion-btn" data-i18n="settings.save_motion">Save Motion
                        Settings</button>
                    <button class="btn btn-secondary" id="reset-motion-btn" data-i18n="settings.reset_defaults">Reset to
                        Defaults</button>
                </div>
                <div id="motion-error" class="error-message" style="display:none;"></div>
            </div>
        </div>

        <!-- VFD Parameters Card -->
        <div class="card">
            <div class="card-header">
                <h2 data-i18n="settings.vfd_params">VFD Parameters</h2>
                <span class="card-status" id="vfd-status"></span>
            </div>
            <div class="card-content">
                <div class="setting-group">
                    <label for="vfd-min-speed" data-i18n="settings.min_speed">Minimum Speed (Hz):</label>
                    <div class="input-with-value">
                        <input type="number" id="vfd-min-speed" min="1" max="105" class="form-control">
                        <span class="input-value"><span id="vfd-min-display">1</span> Hz</span>
                    </div>
                </div>

                <div class="setting-group">
                    <label for="vfd-max-speed" data-i18n="settings.max_speed">Maximum Speed (Hz):</label>
                    <div class="input-with-value">
                        <input type="number" id="vfd-max-speed" min="1" max="105" class="form-control">
                        <span class="input-value"><span id="vfd-max-display">105</span> Hz</span>
                    </div>
                </div>

                <div class="setting-group">
                    <label for="vfd-acc-time" data-i18n="settings.acc_time">Acceleration Time (ms):</label>
                    <div class="input-with-value">
                        <input type="number" id="vfd-acc-time" min="200" max="2000" step="50" class="form-control">
                        <span class="input-value"><span id="vfd-acc-display">600</span> ms</span>
                    </div>
                </div>

                <div class="setting-group">
                    <label for="vfd-dec-time" data-i18n="settings.dec_time">Deceleration Time (ms):</label>
                    <div class="input-with-value">
                        <input type="number" id="vfd-dec-time" min="200" max="2000" step="50" class="form-control">
                        <span class="input-value"><span id="vfd-dec-display">400</span> ms</span>
                    </div>
                </div>

                <div class="setting-group">
                    <button class="btn btn-primary" id="save-vfd-btn" data-i18n="settings.save_vfd">Save VFD
                        Settings</button>
                    <button class="btn btn-secondary" id="reset-vfd-btn" data-i18n="settings.reset_defaults">Reset to
                        Defaults</button>
                </div>
                <div id="vfd-error" class="error-message" style="display:none;"></div>
            </div>
        </div>

        <!-- Spindle Alarm Configuration Card -->
        <div class="card">
            <div class="card-header">
                <h2 data-i18n="settings.spindle_alarm">Spindle Alarm Configuration</h2>
                <span class="card-status" id="spindle-alarm-status"></span>
            </div>
            <div class="card-content">
                <p style="font-size: var(--font-size-sm); color: var(--text-secondary); margin-bottom: var(--space-md);"
                    data-i18n="settings.spindle_desc">
                    Configure spindle load monitoring alarms for tool breakage and stall detection.
                </p>

                <!-- Current Alarm Status -->
                <div class="alarm-status-panel"
                    style="background: var(--bg-secondary); padding: 12px; border-radius: 8px; margin-bottom: 20px;">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <div>
                            <span class="card-label" data-i18n="settings.tool_breakage">Tool Breakage:</span>
                            <span class="card-value" id="alarm-toolbreak-status"
                                style="color: var(--color-optimal);">OK</span>
                        </div>
                        <div>
                            <span class="card-label" data-i18n="settings.stall_alarm">Stall Alarm:</span>
                            <span class="card-value" id="alarm-stall-status"
                                style="color: var(--color-optimal);">OK</span>
                        </div>
                    </div>
                    <button class="btn btn-secondary btn-small" id="clear-spindle-alarms-btn"
                        style="margin-top: 10px; width: 100%;" data-i18n="settings.clear_alarms">Clear All
                        Alarms</button>
                </div>

                <div class="setting-group">
                    <label for="spindle-toolbreak-threshold" data-i18n="settings.tool_break_thresh">Tool Breakage
                        Threshold (sudden current drop):</label>
                    <div class="input-with-value">
                        <input type="range" id="spindle-toolbreak-threshold" min="1" max="20" step="0.5" value="5"
                            class="slider">
                        <span class="input-value"><span id="toolbreak-value">5.0</span> A</span>
                    </div>
                    <div style="font-size: var(--font-size-sm); color: var(--text-secondary); margin-top: 4px;">
                        Triggers if spindle current drops by this amount suddenly (tool break detection)
                    </div>
                </div>

                <div class="setting-group">
                    <label for="spindle-stall-threshold" data-i18n="settings.stall_thresh">Stall Current
                        Threshold:</label>
                    <div class="input-with-value">
                        <input type="range" id="spindle-stall-threshold" min="5" max="50" step="1" value="25"
                            class="slider">
                        <span class="input-value"><span id="stall-threshold-value">25</span> A</span>
                    </div>
                    <div style="font-size: var(--font-size-sm); color: var(--text-secondary); margin-top: 4px;">
                        Triggers stall alarm if current exceeds this threshold for specified duration
                    </div>
                </div>

                <div class="setting-group">
                    <label for="spindle-stall-timeout" data-i18n="settings.stall_timeout">Stall Detection
                        Timeout:</label>
                    <div class="input-with-value">
                        <input type="range" id="spindle-stall-timeout" min="500" max="10000" step="250" value="2000"
                            class="slider">
                        <span class="input-value"><span id="stall-timeout-value">2000</span> ms</span>
                    </div>
                    <div style="font-size: var(--font-size-sm); color: var(--text-secondary); margin-top: 4px;">
                        How long current must exceed threshold before stall alarm triggers
                    </div>
                </div>

                <div class="setting-group">
                    <button class="btn btn-primary" id="save-spindle-alarm-btn" data-i18n="settings.save_alarm">Save
                        Alarm Settings</button>
                    <button class="btn btn-secondary" id="reset-spindle-alarm-btn"
                        data-i18n="settings.reset_defaults">Reset to Defaults</button>
                </div>
                <div id="spindle-alarm-error" class="error-message" style="display:none;"></div>
            </div>
        </div>

        <!-- Encoder Calibration Card -->
        <div class="card">
            <div class="card-header">
                <h2 data-i18n="settings.encoder_cal">Encoder Calibration</h2>
                <span class="card-status" id="encoder-status"></span>
            </div>
            <div class="card-content">
                <p style="font-size: var(--font-size-sm); color: var(--text-secondary); margin-bottom: var(--space-md);"
                    data-i18n="settings.encoder_desc">
                    Pulses Per Millimeter (PPM) - typically 50-200 depending on encoder gearing
                </p>

                <div class="encoder-group">
                    <h3 data-i18n="settings.x_encoder">X-Axis Encoder</h3>
                    <div class="setting-group">
                        <label for="x-encoder-ppm" data-i18n="settings.ppm_value">PPM Value:</label>
                        <div class="input-with-value">
                            <input type="number" id="x-encoder-ppm" min="50" max="200" class="form-control">
                            <span class="input-value"><span id="x-ppm-display">100</span> PPM</span>
                        </div>
                    </div>
                    <button class="btn btn-small btn-primary" id="calibrate-x-btn"
                        data-i18n="settings.calibrate_x">Calibrate X</button>
                </div>

                <div class="encoder-group">
                    <h3 data-i18n="settings.y_encoder">Y-Axis Encoder</h3>
                    <div class="setting-group">
                        <label for="y-encoder-ppm" data-i18n="settings.ppm_value">PPM Value:</label>
                        <div class="input-with-value">
                            <input type="number" id="y-encoder-ppm" min="50" max="200" class="form-control">
                            <span class="input-value"><span id="y-ppm-display">100</span> PPM</span>
                        </div>
                    </div>
                    <button class="btn btn-small btn-primary" id="calibrate-y-btn"
                        data-i18n="settings.calibrate_y">Calibrate Y</button>
                </div>

                <div class="encoder-group">
                    <h3 data-i18n="settings.z_encoder">Z-Axis Encoder</h3>
                    <div class="setting-group">
                        <label for="z-encoder-ppm" data-i18n="settings.ppm_value">PPM Value:</label>
                        <div class="input-with-value">
                            <input type="number" id="z-encoder-ppm" min="50" max="200" class="form-control">
                            <span class="input-value"><span id="z-ppm-display">100</span> PPM</span>
                        </div>
                    </div>
                    <button class="btn btn-small btn-primary" id="calibrate-z-btn"
                        data-i18n="settings.calibrate_z">Calibrate Z</button>
                </div>

                <div class="setting-group" style="margin-top: var(--space-lg);">
                    <button class="btn btn-secondary" id="reset-encoder-btn" data-i18n="settings.reset_encoder">Reset
                        All to Defaults</button>
                </div>
                <div id="encoder-error" class="error-message" style="display:none;"></div>
            </div>
        </div>



        <!-- Configuration Import/Export Card -->
        <div class="card">
            <div class="card-header">
                <h2 data-i18n="settings.config_mgmt">Configuration Management</h2>
            </div>
            <div class="card-content">
                <!-- Backup Status Banner -->
                <div id="backup-status-banner"
                    style="margin-bottom: 20px; padding: 12px; border-radius: 8px; background: var(--bg-secondary);">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <span style="font-weight: 600;" data-i18n="settings.last_backup">Last Backup:</span>
                            <span id="last-backup-text" style="margin-left: 8px;">Never</span>
                        </div>
                        <span id="backup-status-icon" style="font-size: 1.2em;">⚠️</span>
                    </div>
                    <div id="backup-warning"
                        style="margin-top: 8px; font-size: var(--font-size-sm); color: var(--color-warning); display: none;">
                        data-i18n="settings.backup_warning">It's recommended to backup your configuration regularly.
                    </div>
                </div>

                <div style="margin-bottom: 20px;">
                    <h3 style="font-size: var(--font-size-base); font-weight: 600; margin-bottom: 10px;"
                        data-i18n="settings.config_presets">Configuration
                        Presets</h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px;">
                        <label for="preset-select" class="sr-only" data-i18n="settings.config_presets">Configuration
                            Preset</label>
                        <select id="preset-select" class="form-control">
                            <option value="" data-i18n="settings.select_preset">-- Select a preset --</option>
                            <option value="limestone">Limestone</option>
                            <option value="marble">Marble</option>
                            <option value="soft_granite">Soft Granite</option>
                            <option value="hard_granite">Hard Granite</option>
                        </select>
                        <button class="btn btn-primary" id="load-preset-btn" data-i18n="settings.load_preset">Load
                            Preset</button>
                    </div>
                </div>

                <div style="border-top: 1px solid var(--border-color); padding-top: 15px; margin-top: 15px;">
                    <h3 style="font-size: var(--font-size-base); font-weight: 600; margin-bottom: 10px;"
                        data-i18n="settings.export_config">Export
                        Configuration</h3>
                    <p style="font-size: var(--font-size-sm); color: var(--text-secondary); margin-bottom: 10px;"
                        data-i18n="settings.export_desc">
                        Download current configuration as JSON file for backup or sharing
                    </p>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <button class="btn btn-secondary" id="export-all-btn" data-i18n="settings.export_all">Export All
                            Settings</button>
                        <button class="btn btn-ghost" id="export-motion-btn" data-i18n="settings.export_motion">Export
                            Motion Only</button>
                    </div>
                </div>

                <div style="border-top: 1px solid var(--border-color); padding-top: 15px; margin-top: 15px;">
                    <h3 style="font-size: var(--font-size-base); font-weight: 600; margin-bottom: 10px;"
                        data-i18n="settings.import_config">Import
                        Configuration</h3>
                    <p style="font-size: var(--font-size-sm); color: var(--text-secondary); margin-bottom: 10px;"
                        data-i18n="settings.import_desc">
                        Upload a previously saved configuration file to restore settings
                    </p>
                    <button class="btn btn-secondary" id="import-config-btn" style="width: 100%; margin-bottom: 10px;"
                        data-i18n="settings.choose_file">Choose File & Import</button>
                    <div id="import-status"
                        style="font-size: var(--font-size-sm); display: none; padding: 10px; background: var(--bg-secondary); border-radius: 4px; margin-top: 10px;">
                    </div>
                </div>

                <div style="border-top: 1px solid var(--border-color); padding-top: 15px; margin-top: 15px;">
                    <h3 style="font-size: var(--font-size-base); font-weight: 600; margin-bottom: 10px;"
                        data-i18n="settings.comparison">Comparison</h3>
                    <p style="font-size: var(--font-size-sm); color: var(--text-secondary); margin-bottom: 10px;"
                        data-i18n="settings.compare_desc">
                        Compare current settings with a backup file before importing
                    </p>
                    <button class="btn btn-ghost" id="compare-config-btn" data-i18n="settings.compare_btn">Compare with
                        File</button>
                    <div id="comparison-result"
                        style="font-size: var(--font-size-sm); display: none; margin-top: 10px; padding: 10px; background: var(--bg-secondary); border-radius: 4px; max-height: 200px; overflow-y: auto;">
                    </div>
                </div>
            </div>
        </div>

        <!-- CLI Options Card -->
        <div class="card">
            <div class="card-header">
                <h2 data-i18n="settings.cli_options">CLI Options</h2>
            </div>
            <div class="card-content">
                <p style="font-size: var(--font-size-sm); color: var(--text-secondary); margin-bottom: var(--space-md);"
                    data-i18n="settings.cli_desc">
                    Settings for Serial and Telnet command-line interfaces.
                </p>

                <div class="setting-group">
                    <input type="checkbox" id="cli-echo-toggle">
                    <label for="cli-echo-toggle" data-i18n="settings.enable_echo">Enable local echo (show typed
                        characters)</label>
                </div>

                <div class="setting-group">
                    <button class="btn btn-primary" id="save-cli-options-btn" data-i18n="settings.save_cli">Save CLI
                        Settings</button>
                </div>
                <div id="cli-options-error" class="error-message" style="display:none;"></div>
            </div>
        </div>

        <!-- OTA Settings Card -->
        <div class="card">
            <div class="card-header">
                <h2 data-i18n="settings.ota_updates">OTA Updates</h2>
            </div>
            <div class="card-content">
                <p style="font-size: var(--font-size-sm); color: var(--text-secondary); margin-bottom: var(--space-md);"
                    data-i18n="settings.ota_desc">
                    Over-the-air firmware update settings. Disable GitHub check to save ~16KB memory.
                </p>

                <div class="setting-group">
                    <input type="checkbox" id="ota-check-toggle">
                    <label for="ota-check-toggle" data-i18n="settings.enable_ota">Enable automatic GitHub update
                        check</label>
                    <div style="font-size: var(--font-size-sm); color: var(--text-secondary); margin-top: 4px;"
                        data-i18n="settings.ota_note">
                        Checks GitHub for new firmware versions at boot. Requires internet connection.
                    </div>
                </div>

                <div class="setting-group">
                    <button class="btn btn-primary" id="save-ota-settings-btn" data-i18n="settings.save_ota">Save OTA
                        Settings</button>
                </div>
                <div id="ota-settings-error" class="error-message" style="display:none;"></div>
            </div>
        </div>

    </div>
</div>

<style>
    .settings-page .setting-group {
        margin-bottom: var(--space-lg);
    }

    .settings-page .setting-group label {
        display: block;
        font-weight: 600;
        margin-bottom: var(--space-sm);
        font-size: var(--font-size-base);
    }

    .settings-page .setting-group span {
        font-weight: 400;
    }

    .settings-page .form-control {
        width: 100%;
        padding: 8px;
        border: 1px solid var(--bg-secondary);
        border-radius: 4px;
        background: var(--bg-primary);
        color: var(--text-primary);
        font-size: var(--font-size-base);
    }

    .settings-page .form-control:focus {
        outline: none;
        border-color: var(--color-normal);
        box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);
    }

    .settings-page .theme-selector {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: var(--space-md);
        margin-top: var(--space-md);
    }

    .settings-page .theme-option {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: var(--space-sm);
        padding: var(--space-md);
        border: 2px solid transparent;
        border-radius: 8px;
        background: var(--bg-secondary);
        cursor: pointer;
        transition: all var(--transition-normal);
    }

    .settings-page .theme-option:hover {
        border-color: var(--color-normal);
    }

    .settings-page .theme-option.active {
        border-color: var(--color-normal);
        background: var(--bg-secondary);
    }

    .settings-page .theme-preview {
        width: 60px;
        height: 60px;
        border-radius: 6px;
        border: 1px solid var(--text-secondary);
    }

    .settings-page .theme-preview.light {
        background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
    }

    .settings-page .theme-preview.dark {
        background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
    }

    .settings-page .theme-preview.high-contrast {
        background: linear-gradient(135deg, #000000 0%, #ffffff 100%);
    }

    .settings-page .theme-preview.colorblind {
        background: linear-gradient(135deg, #0173b2 0%, #de8f05 100%);
    }

    .settings-page .slider-container {
        margin-top: var(--space-md);
    }

    .settings-page .slider {
        width: 100%;
        height: 6px;
        border-radius: 3px;
        background: var(--bg-secondary);
        outline: none;
        -webkit-appearance: none;
        appearance: none;
    }

    .settings-page .slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: var(--color-normal);
        cursor: pointer;
        transition: background var(--transition-fast);
    }

    .settings-page .slider::-webkit-slider-thumb:hover {
        background: var(--color-warning);
    }

    .settings-page .slider::-moz-range-thumb {
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: var(--color-normal);
        cursor: pointer;
        border: none;
        transition: background var(--transition-fast);
    }

    .settings-page .slider::-moz-range-thumb:hover {
        background: var(--color-warning);
    }

    .settings-page .slider-labels {
        display: flex;
        justify-content: space-between;
        font-size: var(--font-size-sm);
        color: var(--text-secondary);
        margin-top: var(--space-xs);
    }

    .settings-page .input-with-value {
        display: flex;
        gap: var(--space-md);
        align-items: center;
    }

    .settings-page .input-value {
        min-width: 60px;
        text-align: right;
        font-weight: 600;
    }

    .settings-page .storage-info {
        background: var(--bg-secondary);
        padding: var(--space-md);
        border-radius: 8px;
    }

    .settings-page .storage-stat {
        display: flex;
        justify-content: space-between;
        font-size: var(--font-size-sm);
        margin-bottom: var(--space-md);
    }

    .settings-page .storage-bar {
        width: 100%;
        height: 20px;
        background: var(--bg-primary);
        border-radius: 4px;
        overflow: hidden;
    }

    .settings-page .storage-fill {
        height: 100%;
        background: linear-gradient(90deg, var(--color-optimal) 0%, var(--color-warning) 100%);
        transition: width var(--transition-normal);
    }

    .settings-page .info-table {
        display: flex;
        flex-direction: column;
        gap: var(--space-md);
    }

    .settings-page .info-row {
        display: grid;
        grid-template-columns: 180px 1fr;
        gap: var(--space-md);
        padding: var(--space-sm) 0;
        border-bottom: 1px solid var(--bg-secondary);
    }

    .settings-page .info-row:last-child {
        border-bottom: none;
    }

    .settings-page .info-label {
        font-weight: 600;
        color: var(--text-secondary);
    }

    .settings-page .info-value {
        font-family: 'Courier New', monospace;
        color: var(--text-primary);
    }

    .settings-page .about-text p {
        margin: 0;
        line-height: 1.6;
    }

    .settings-page .about-text p:first-child {
        font-size: var(--font-size-lg);
        font-weight: 700;
        margin-bottom: var(--space-md);
    }

    .settings-page .btn-danger {
        background: var(--color-critical);
        color: white;
    }

    .settings-page .btn-danger:hover {
        opacity: 0.9;
    }

    /* Configuration sections styling */
    .settings-page .axis-group,
    .settings-page .encoder-group {
        margin-bottom: var(--space-lg);
        padding-bottom: var(--space-lg);
        border-bottom: 1px solid var(--bg-secondary);
    }

    .settings-page .axis-group:last-child,
    .settings-page .encoder-group:last-child {
        border-bottom: none;
    }

    .settings-page .axis-group h3,
    .settings-page .encoder-group h3 {
        font-size: var(--font-size-base);
        font-weight: 600;
        margin-bottom: var(--space-md);
        color: var(--text-primary);
    }

    .settings-page .card-status {
        font-size: var(--font-size-sm);
        padding: 4px 8px;
        border-radius: 4px;
        background: var(--bg-secondary);
        color: var(--text-secondary);
    }

    .settings-page .card-status.loaded {
        background: rgba(34, 197, 94, 0.1);
        color: var(--color-optimal);
    }

    .settings-page .card-status.error {
        background: rgba(239, 68, 68, 0.1);
        color: var(--color-critical);
    }

    .settings-page .error-message {
        margin-top: var(--space-md);
        padding: var(--space-md);
        background: rgba(239, 68, 68, 0.1);
        border: 1px solid rgba(239, 68, 68, 0.3);
        border-radius: 4px;
        color: var(--color-critical);
        font-size: var(--font-size-sm);
    }

    .settings-page .btn-small {
        padding: 6px 12px;
        font-size: var(--font-size-sm);
    }

    @media (max-width: 768px) {
        .settings-page .theme-selector {
            grid-template-columns: repeat(2, 1fr);
        }

        .settings-page .info-row {
            grid-template-columns: 1fr;
        }
    }
</style>