<div class="explorer-container">
    <div class="explorer-header">
        <div class="breadcrumb-container">
            <div id="explorer-breadcrumbs" class="breadcrumbs">
                <!-- Breadcrumbs populated by JS -->
            </div>
        </div>
        <div class="explorer-actions">
            <label class="btn btn-primary" title="Upload File">
                <input type="file" id="explorer-upload-input" hidden>
                <span>â¬†ï¸ <span data-i18n="explorer.upload">Upload</span></span>
            </label>
            <button id="explorer-new-folder" class="btn btn-secondary" title="New Folder">
                <span>ğŸ“+ <span data-i18n="explorer.new_folder">New Folder</span></span>
            </button>
            <button id="explorer-refresh" class="btn btn-secondary" title="Refresh">
                <span>ğŸ”„</span>
            </button>
        </div>
    </div>

    <!-- Search and Sort Bar -->
    <div class="explorer-controls">
        <div class="search-box">
            <span class="search-icon">ğŸ”</span>
            <input type="text" id="explorer-search" data-i18n-placeholder="explorer.search_placeholder"
                placeholder="Search files...">
        </div>
        <div class="sort-box">
            <label data-i18n="explorer.sort_by">Sort by:</label>
            <select id="explorer-sort-by">
                <option value="name" data-i18n="explorer.sort_name">Name</option>
                <option value="size" data-i18n="explorer.sort_size">Size</option>
                <option value="time" data-i18n="explorer.sort_date">Date</option>
            </select>
            <button id="explorer-sort-order" class="btn-icon" title="Toggle Order">ğŸ”¼</button>
        </div>
        <div class="select-all-box">
            <input type="checkbox" id="explorer-select-all">
            <label for="explorer-select-all" data-i18n="explorer.select_all">Select All</label>
        </div>
        <div class="view-toggle">
            <button id="view-grid" class="btn-icon active" title="Grid View">ğŸ”²</button>
            <button id="view-list" class="btn-icon" title="List View">â‰¡</button>
        </div>
    </div>

    <div class="explorer-body">
        <aside class="explorer-sidebar">
            <div class="sidebar-section">
                <h4 data-i18n="explorer.storage">Storage</h4>
                <ul class="drive-list">
                    <li class="drive-item active" data-drive="flash">
                        <span class="drive-icon">ğŸ“Ÿ</span>
                        <div class="drive-info">
                            <span class="drive-name" data-i18n="explorer.internal_flash">Internal Flash</span>
                            <div class="progress-small">
                                <div id="flash-usage-bar" class="progress-bar" style="width: 0%"></div>
                            </div>
                        </div>
                    </li>
                    <li class="drive-item" data-drive="sd">
                        <span class="drive-icon">ğŸ’¾</span>
                        <div class="drive-info">
                            <span class="drive-name" data-i18n="explorer.sd_card">SD Card</span>
                            <div class="progress-small">
                                <div id="sd-usage-bar" class="progress-bar" style="width: 0%"></div>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
            <div class="sidebar-section">
                <h4 data-i18n="explorer.quick_access">Quick Access</h4>
                <ul class="quick-links">
                    <li data-path="/logs">ğŸ“‹ <span data-i18n="explorer.logs">Logs</span></li>
                    <li data-path="/gcode">ğŸ“ <span data-i18n="explorer.gcode">G-Code</span></li>
                    <li data-path="/sd/logs">ğŸ’¾ <span data-i18n="explorer.sd_logs">SD Logs</span></li>
                    <li data-path="/.trash">ğŸ—‘ï¸ <span data-i18n="explorer.trash">Trash</span></li>
                </ul>
            </div>
        </aside>

        <main class="explorer-main">
            <div id="explorer-file-list" class="file-grid">
                <!-- Files and folders populated by JS -->
                <div class="loading-overlay">
                    <div class="spinner"></div>
                </div>
            </div>
            <div id="explorer-drop-zone" class="drop-zone hidden">
                <div class="drop-zone-content">
                    <span class="drop-icon">ğŸ“¤</span>
                    <h3 data-i18n="explorer.drop_to_upload">Drop files to upload</h3>
                </div>
            </div>
        </main>
    </div>

    <!-- Bulk Action Bar -->
    <div id="explorer-bulk-bar" class="bulk-bar hidden">
        <div class="bulk-info">
            <span id="bulk-count">0</span> <span data-i18n="explorer.selected">files selected</span>
        </div>
        <div class="bulk-actions">
            <button id="bulk-restore" class="btn btn-primary hidden">
                <span>ğŸ”„ <span data-i18n="explorer.restore_selected">Restore Selected</span></span>
            </button>
            <button id="bulk-delete" class="btn btn-danger">
                <span>ğŸ—‘ï¸ <span data-i18n="explorer.delete_selected">Delete Selected</span></span>
            </button>
            <button id="bulk-cancel" class="btn btn-secondary">
                <span data-i18n="explorer.cancel">Cancel</span>
            </button>
        </div>
    </div>

    <!-- Context Menu -->
    <div id="explorer-ctx-menu" class="ctx-menu hidden">
        <ul>
            <li id="ctx-open">ğŸ“‚ <span data-i18n="explorer.open">Open</span></li>
            <li id="ctx-edit">âœï¸ <span data-i18n="explorer.edit">Edit</span></li>
            <li id="ctx-run" class="hidden">â–¶ï¸ <span data-i18n="explorer.run">Run</span></li>
            <li class="menu-divider"></li>
            <li id="ctx-download">â¬‡ï¸ <span data-i18n="explorer.download">Download</span></li>
            <li id="ctx-rename">ğŸ·ï¸ <span data-i18n="explorer.rename">Rename</span></li>
            <li id="ctx-restore" class="hidden">ğŸ”„ <span data-i18n="explorer.restore">Restore</span></li>
            <li id="ctx-delete" class="menu-danger">ğŸ—‘ï¸ <span data-i18n="explorer.delete">Delete</span></li>
        </ul>
    </div>

    <!-- Upload Progress Bar -->
    <div id="upload-progress-container" class="progress-overlay hidden">
        <div class="progress-card">
            <h4 data-i18n="explorer.uploading">Uploading...</h4>
            <div class="progress-large">
                <div id="upload-progress-bar" class="progress-bar" style="width: 0%"></div>
            </div>
            <span id="upload-progress-text">0%</span>
        </div>
    </div>

    <!-- Inline Editor -->
    <div id="explorer-editor" class="editor-overlay hidden">
        <div class="editor-container">
            <div class="editor-header">
                <span id="editor-filename">filename.gcode</span>
                <div class="editor-actions">
                    <button id="editor-save" class="btn btn-primary"><span
                            data-i18n="explorer.save">Save</span></button>
                    <button id="editor-close" class="btn btn-secondary"><span
                            data-i18n="explorer.close">Close</span></button>
                </div>
            </div>
            <div class="editor-body">
                <textarea id="editor-textarea" spellcheck="false"></textarea>
            </div>
        </div>
    </div>
</div>