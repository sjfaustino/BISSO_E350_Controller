window.DashboardModule=window.DashboardModule||{history:{cpu:[],memory:[],spindle:[],temperature:[],latency:[],motion:[],wifi:[],timestamps:[]},maxHistory:300,currentTimeRange:3e5,chart:null,graphs:{},lastTelemetry:null,stateChangeHandler:null,updateInterval:null,historicalDataLoaded:!1,setNA(t,e=""){t&&(t.classList.remove("value-na"),t.innerHTML='<span class="value-na">n/a</span>'+e)},updateHeaderNA(t,e,i){const s=document.getElementById(t);s&&(s.innerHTML=i?e:`${e} <span class="value-na" style="font-size: 0.8em; margin-left: 8px;">(N/A)</span>`)},setValue(t,e){t&&(t.textContent=e,t.classList.remove("value-na"))},init(){console.log("[Dashboard] Initializing"),this.setupEventListeners(),this.initializeGraphs(),this.historicalDataLoaded=!1,this.stateChangeHandler=()=>this.onStateChanged(),window.addEventListener("state-changed",this.stateChangeHandler),this.updateInterval=setInterval(()=>{this.onStateChanged(),this.updateGraphs()},1e3),this.loadHistoryData()},setupEventListeners(){document.querySelectorAll(".card-toggle").forEach(t=>{t.addEventListener("click",()=>{const e=t.closest(".card").querySelector(".card-content");e.classList.toggle("collapsed"),t.textContent=e.classList.contains("collapsed")?"+":"âˆ’"})});const t=document.getElementById("graph-time-range");t&&t.addEventListener("change",t=>{this.currentTimeRange=1e3*parseInt(t.target.value),console.log("[Dashboard] Time range changed to",this.currentTimeRange/1e3,"seconds"),Object.values(this.graphs).forEach(t=>{t&&t.config&&(t.config.timeWindow=this.currentTimeRange,"function"==typeof t.draw&&t.draw())})});const e=document.getElementById("export-graphs-btn");e&&e.addEventListener("click",()=>this.exportGraphsData()),document.querySelectorAll(".time-btn").forEach(t=>{t.addEventListener("click",()=>{document.querySelectorAll(".time-btn").forEach(t=>t.classList.remove("active")),t.classList.add("active"),this.currentTimeRange=parseInt(t.dataset.range),this.drawChart()})});const i=document.getElementById("dro-coord-mode"),s=document.getElementById("dro-work-offset");i&&(this.workCoordMode=localStorage.getItem("droCoordMode")||"machine",this.workOffset=localStorage.getItem("droWorkOffset")||"G54",this.updateCoordModeUI(),i.addEventListener("click",()=>{this.workCoordMode="machine"===this.workCoordMode?"work":"machine",localStorage.setItem("droCoordMode",this.workCoordMode),this.updateCoordModeUI(),this.onStateChanged()})),s&&(s.value=this.workOffset||"G54",s.addEventListener("change",t=>{this.workOffset=t.target.value,localStorage.setItem("droWorkOffset",this.workOffset),this.onStateChanged()}))},loadHistoryData(){"file:"!==window.location.protocol&&fetch("/api/history/telemetry").then(t=>t.json()).then(t=>{if(t.success){if(console.log("[Dashboard] Loading",t.cpu?.length,"history samples"),t.cpu&&(this.history.cpu=t.cpu),t.heap&&(this.history.memory=t.heap.map(t=>t/1024)),t.spindle_amps&&(this.history.spindle=t.spindle_amps),t.cpu&&t.cpu.length>0){const e=Date.now();this.history.timestamps=t.cpu.map((i,s)=>e-5e3*(t.cpu.length-1-s))}this.historicalDataLoaded=!1,this.updateGraphs()}}).catch(t=>console.warn("[Dashboard] Failed to load history:",t))},updateCoordModeUI(){const t=document.getElementById("dro-coord-mode"),e=document.getElementById("dro-mode-text"),i=document.getElementById("dro-work-offset");e&&(e.textContent="machine"===this.workCoordMode?"Machine":"Work"),t&&t.classList.toggle("work-mode","work"===this.workCoordMode),i&&(i.disabled="machine"===this.workCoordMode)},initializeGraphs(){if(document.getElementById("cpu-graph"))try{this.graphs.cpu=new GraphVisualizer("cpu-graph",{title:"CPU Usage (%)",yMin:0,yMax:100,unit:"%",timeWindow:this.currentTimeRange}),this.graphs.cpu.addSeries("CPU","#10b981")}catch(t){console.warn("CPU graph init failed:",t)}if(document.getElementById("memory-graph"))try{this.graphs.memory=new GraphVisualizer("memory-graph",{title:"Free Memory (KB)",yMin:0,yMax:350,unit:" KB",timeWindow:this.currentTimeRange}),this.graphs.memory.addSeries("Memory","#3b82f6")}catch(t){console.warn("Memory graph init failed:",t)}if(document.getElementById("spindle-graph"))try{this.graphs.spindle=new GraphVisualizer("spindle-graph",{title:"Spindle Current (A)",yMin:0,yMax:20,unit:" A",timeWindow:this.currentTimeRange}),this.graphs.spindle.addSeries("Current","#f59e0b")}catch(t){console.warn("Spindle graph init failed:",t)}if(document.getElementById("temperature-graph"))try{this.graphs.temperature=new GraphVisualizer("temperature-graph",{title:"CPU Temperature (Â°C)",yMin:20,yMax:80,unit:" Â°C",timeWindow:this.currentTimeRange}),this.graphs.temperature.addSeries("Temp","#ef4444")}catch(t){console.warn("Temperature graph init failed:",t)}if(document.getElementById("latency-graph"))try{this.graphs.latency=new GraphVisualizer("latency-graph",{title:"WebSocket Latency (ms)",yMin:0,yMax:100,unit:" ms",timeWindow:this.currentTimeRange}),this.graphs.latency.addSeries("Latency","#8b5cf6")}catch(t){console.warn("Latency graph init failed:",t)}if(document.getElementById("motion-load-graph"))try{this.graphs.motion=new GraphVisualizer("motion-load-graph",{title:"Motion System Load",yMin:0,yMax:100,unit:"%",timeWindow:this.currentTimeRange}),this.graphs.motion.addSeries("Quality","#10b981"),this.graphs.motion.addSeries("Jitter","#f59e0b")}catch(t){console.warn("Motion graph init failed:",t)}if(document.getElementById("wifi-graph"))try{this.graphs.wifi=new GraphVisualizer("wifi-graph",{title:"WiFi Signal Quality (%)",yMin:0,yMax:100,unit:"%",timeWindow:this.currentTimeRange}),this.graphs.wifi.addSeries("Signal","#3b82f6")}catch(t){console.warn("WiFi graph init failed:",t)}console.log("[Dashboard] Graphs initialized"),this.restoreHistoricalData()},restoreHistoricalData(){const t=Date.now();if(this.history.cpu.length>0){console.log(`[Dashboard] Restoring ${this.history.cpu.length} historical data points`);for(let e=0;e<this.history.cpu.length;e++){const i=t-1e3*(this.history.cpu.length-1-e);this.graphs.cpu&&void 0!==this.history.cpu[e]&&this.graphs.cpu.addDataPoint("CPU",this.history.cpu[e],i),this.graphs.memory&&void 0!==this.history.memory[e]&&this.graphs.memory.addDataPoint("Memory",this.history.memory[e],i),this.graphs.spindle&&void 0!==this.history.spindle[e]&&this.graphs.spindle.addDataPoint("Current",this.history.spindle[e],i),this.graphs.temperature&&void 0!==this.history.temperature[e]&&this.graphs.temperature.addDataPoint("Temp",this.history.temperature[e],i),this.graphs.latency&&void 0!==this.history.latency[e]&&this.graphs.latency.addDataPoint("Latency",this.history.latency[e],i),this.graphs.wifi&&void 0!==this.history.wifi[e]&&this.graphs.wifi.addDataPoint("Signal",this.history.wifi[e],i)}}},onStateChanged(){const t=AppState.data;this.lastTelemetry=t,this.updateSystemStatus(t),this.updateMotionStatus(t),this.updateVFDStatus(t),this.updateNetworkStatus(t),t.axis&&(this.updateAxisCard("x",t.axis.x),this.updateAxisCard("y",t.axis.y),this.updateAxisCard("z",t.axis.z),this.updateDRO(t.axis)),this.updateHistoryData(t),this.drawChart()},updateSystemStatus(t){if(!t.system)return;const e=t.system.cpu_percent||0,i=t.system.free_heap_bytes||0,s=t.system.health||"UNKNOWN",n=t.system.status||"IDLE",a=document.getElementById("health-value");a&&(a.textContent=s,a.className="card-value "+s.toLowerCase());const o=document.getElementById("health-detail");o&&(o.textContent="Status: "+n);const r=document.getElementById("health-bar");r&&(r.className="progress-fill "+s.toLowerCase());const d=document.getElementById("cpu-value");d&&(d.textContent=e.toFixed(1)+"%");const h=document.getElementById("cpu-bar");h&&(h.style.width=e+"%",h.className="progress-fill",e>85&&h.classList.add("warning"),e>95&&h.classList.add("critical"));const l=document.getElementById("mem-value");l&&(l.textContent=(i/1024).toFixed(0)+" KB");const c=document.getElementById("mem-bar");if(c){const t=32e4,e=Math.min(100,i/t*100);c.style.width=e+"%"}},updateMotionStatus(t){const e=!1!==t.system?.plc_hardware_present;if(this.updateHeaderNA("header-motion","Motion Status",e),this.updateHeaderNA("header-motion-load","Motion System Load",e),t.motion){const i=document.getElementById("motion-status");i&&(e?(i.textContent=t.motion.moving?"ðŸ”„ Moving":"â¸ï¸ Stopped",i.style.color=""):this.setNA(i))}if(t.safety){const i=document.getElementById("safety-status");if(i)if(e){let e="âœ“ OK";t.safety.estop?e="ðŸ›‘ E-STOP":t.safety.alarm&&(e="âš ï¸ ALARM"),i.textContent=e,i.style.color=""}else this.setNA(i)}},updateVFDStatus(t){if(!t.vfd)return;this.updateHeaderNA("header-vfd","Axis Drive",t.vfd.connected),this.updateHeaderNA("header-spindle-trend","Spindle Current Trend",t.vfd.connected);const e=document.getElementById("vfd-status"),i=document.getElementById("spindle-rpm"),s=document.getElementById("spindle-speed"),n=document.getElementById("spindle-current");if(t.vfd.connected){const a=t.vfd.rpm>0?"RUNNING":"IDLE";e&&(e.textContent=a),i&&(i.textContent=(t.vfd.rpm||0).toFixed(0)),s&&(s.textContent=(t.vfd.speed_m_s||0).toFixed(1)+" m/s"),n&&(n.textContent=(t.vfd.current_amps||0).toFixed(2)+" A");const o=document.getElementById("spindle-bar");if(o){const e=Math.min(100,(t.vfd.current_amps||0)/30*100);o.style.width=e+"%"}}else{e&&(e.textContent="DISCONNECTED"),this.setNA(i),this.setNA(s," m/s"),this.setNA(n," A");const t=document.getElementById("spindle-bar");t&&(t.style.width="0%")}const a=document.getElementById("vfd-freq");t.vfd.connected?a&&(a.textContent=(t.vfd.frequency_hz||0).toFixed(1)+" Hz"):this.setNA(a," Hz")},updateNetworkStatus(t){if(!t.network)return;const e=document.getElementById("wifi-signal");e&&(e.textContent=t.network.signal_percent+"%");const i=document.getElementById("wifi-bar");i&&(i.style.width=t.network.signal_percent+"%");const s=document.getElementById("wifi-status");s&&(s.textContent=t.network.wifi_connected?"âœ“ Connected":"âœ— Disconnected")},updateHistoryData(t){this.history.cpu.push(t.system?.cpu_percent||0),this.history.memory.push((t.system?.free_heap_bytes||0)/1024),this.history.spindle.push(t.vfd?.current_amps||0),this.history.temperature.push(t.system?.temperature||0),this.history.latency.push(SharedWebSocket.latency||0),this.history.wifi.push(t.network?.signal_percent||0);let e=80;if(t.axis){const i=[];t.axis.x?.quality&&i.push(t.axis.x.quality),t.axis.y?.quality&&i.push(t.axis.y.quality),t.axis.z?.quality&&i.push(t.axis.z.quality),i.length>0&&(e=i.reduce((t,e)=>t+e,0)/i.length)}let i=.5;if(t.axis){const e=[];t.axis.x?.jitter_mms&&e.push(t.axis.x.jitter_mms),t.axis.y?.jitter_mms&&e.push(t.axis.y.jitter_mms),t.axis.z?.jitter_mms&&e.push(t.axis.z.jitter_mms),e.length>0&&(i=e.reduce((t,e)=>t+e,0)/e.length)}this.history.motion.push({quality:e,jitter:i}),this.history.timestamps.push(Date.now()),this.history.cpu.length>this.maxHistory&&(this.history.cpu.shift(),this.history.memory.shift(),this.history.spindle.shift(),this.history.temperature.shift(),this.history.latency.shift(),this.history.motion.shift(),this.history.wifi.shift(),this.history.timestamps.shift())},updateAxisCard(t,e){if(!e)return;const i=AppState.data.motion?.dro_connected??!1,s=`axis-${t}`,n=t.toUpperCase()+" Axis Quality";this.updateHeaderNA(`header-axis-${t}`,n,i);const a=document.getElementById(`${s}-quality`);i?this.setValue(a,e.quality||0):this.setNA(a);const o=document.getElementById(`${s}-bar`);o&&(o.style.width=i?(e.quality||0)+"%":"0%"),o&&(i?o.classList.remove("offline"):o.classList.add("offline"));const r=document.getElementById(`${s}-jitter`);i?this.setValue(r,(e.jitter_mms||0).toFixed(3)+" mm/s"):this.setNA(r);const d=document.getElementById(`${s}-error`);i?this.setValue(d,(e.vfd_error_percent||0).toFixed(1)+"%"):this.setNA(d);const h=document.getElementById(`${s}-stalled`);h&&(i?e.stalled?(h.textContent="âš ï¸ STALLED",h.style.color="var(--color-critical)"):(h.textContent="âœ“ OK",h.style.color="var(--color-optimal)"):(h.textContent="OFFLINE",h.style.color="var(--color-critical)"))},updateDRO(t){const e=AppState.data.motion?.dro_connected??!1;this.updateHeaderNA("header-dro","ðŸŽ¯ Position (DRO)",e),["x","y","z","a"].forEach(i=>{const s=document.getElementById(`dro-${i}`);if(s)if(e){const e=t[i]?.position_mm??t[i]?.position??0;s.textContent=e.toFixed(3),s.classList.toggle("negative",e<0)}else this.setNA(s),s.classList.remove("negative")});const i=document.getElementById("dro-status");i&&(e?(i.textContent="Live",i.classList.remove("offline")):(i.textContent="Offline",i.classList.add("offline")))},drawChart(){const t=document.getElementById("trendsChart");if(!t)return;const e=t.getContext("2d"),i=t.getBoundingClientRect();t.width=i.width,t.height=i.height;const s=35,n=t.width-s-10,a=t.height-10-20;e.fillStyle=getComputedStyle(document.documentElement).getPropertyValue("--bg-primary").trim()||"#fff",e.fillRect(0,0,t.width,t.height),e.strokeStyle="#e5e7eb",e.lineWidth=1,e.fillStyle="#6b7280",e.font="10px sans-serif",e.textAlign="right",e.textBaseline="middle";for(let i=0;i<=4;i++){const n=i/4,o=10+a-n*a;e.beginPath(),e.moveTo(s,o),e.lineTo(t.width-10,o),e.stroke();const r=100*n;e.fillText(r.toFixed(0),30,o)}e.textAlign="center",e.textBaseline="top";const o=this.currentTimeRange/1e3>=60?this.currentTimeRange/6e4+"m":this.currentTimeRange/1e3+"s";e.fillText("-"+o,s,t.height-20+5),e.fillText("Now",t.width-10,t.height-20+5);const r=Math.min(this.history.cpu.length,60*this.currentTimeRange),d=this.history.cpu.slice(-r),h=this.history.memory.slice(-r),l=this.history.spindle.slice(-r),c=(t,i,o,r="#888")=>{if(t&&!(t.length<2)){e.strokeStyle=i||r,e.lineWidth=2,e.beginPath();for(let i=0;i<t.length;i++){const r=Math.max(0,Math.min(100,t[i]/o*100)),d=s+i/Math.max(1,t.length-1)*n,h=10+a-r/100*a;0===i?e.moveTo(d,h):e.lineTo(d,h)}e.stroke()}},m=getComputedStyle(document.documentElement).getPropertyValue("--chart-cpu").trim()||"#10b981",p=getComputedStyle(document.documentElement).getPropertyValue("--chart-mem").trim()||"#3b82f6",u=getComputedStyle(document.documentElement).getPropertyValue("--chart-spindle").trim()||"#f59e0b";c(d,m,100),c(h,p,320),c(l,u,30),e.strokeStyle=getComputedStyle(document.documentElement).getPropertyValue("--text-primary").trim(),e.lineWidth=1,e.beginPath(),e.moveTo(s,10),e.lineTo(s,t.height-20),e.lineTo(t.width-10,t.height-20),e.stroke()},updateGraphs(){const t=this.graphs.cpu&&"MiniChart"===this.graphs.cpu.constructor.name;if(!this.historicalDataLoaded&&this.history.cpu.length>1){console.log(`[Dashboard] Bulk-loading ${this.history.cpu.length} points to charts`);for(let e=0;e<this.history.cpu.length;e++)void 0!==this.history.cpu[e]&&(t?this.graphs.cpu?.addDataPoint(this.history.cpu[e]):this.graphs.cpu?.addDataPoint("CPU",this.history.cpu[e])),void 0!==this.history.memory[e]&&(t?this.graphs.memory?.addDataPoint(this.history.memory[e]):this.graphs.memory?.addDataPoint("Memory",this.history.memory[e])),void 0!==this.history.spindle[e]&&(t?this.graphs.spindle?.addDataPoint(this.history.spindle[e]):this.graphs.spindle?.addDataPoint("Spindle",this.history.spindle[e])),void 0!==this.history.temperature[e]&&(t?this.graphs.temperature?.addDataPoint(this.history.temperature[e]):this.graphs.temperature?.addDataPoint("Temperature",this.history.temperature[e]));return this.historicalDataLoaded=!0,void console.log("[Dashboard] Bulk-load complete")}if(this.history.cpu.length>0){const e=this.history.cpu[this.history.cpu.length-1];t?this.graphs.cpu?.addDataPoint(e):this.graphs.cpu?.addDataPoint("CPU",e);{let t=this.graphs.cpu?.getStats("CPU");if(!t&&this.history.cpu.length>0){const i=this.history.cpu;t={avg:i.reduce((t,e)=>t+e,0)/i.length,max:Math.max(...i),current:e}}if(t){const i=document.getElementById("cpu-value"),s=document.getElementById("cpu-avg"),n=document.getElementById("cpu-max");i&&(i.textContent=e.toFixed(1)+"%"),s&&(s.textContent=t.avg.toFixed(1)),n&&(n.textContent=t.max.toFixed(1));const a=document.getElementById("cpu-current"),o=document.getElementById("cpu-stat-avg"),r=document.getElementById("cpu-stat-max");a&&(a.textContent=e.toFixed(1)+"%"),o&&(o.textContent=t.avg.toFixed(1)+"%"),r&&(r.textContent=t.max.toFixed(1)+"%")}}}if(this.history.memory.length>0){const e=this.history.memory[this.history.memory.length-1];if(t?this.graphs.memory?.addDataPoint(e):this.graphs.memory?.addDataPoint("Memory",e),!t){const t=this.graphs.memory?.getStats("Memory");if(t){const i=document.getElementById("mem-value"),s=document.getElementById("mem-min");i&&(i.textContent=e.toFixed(0)+" KB"),s&&(s.textContent=t.min.toFixed(0));const n=document.getElementById("mem-current"),a=document.getElementById("mem-stat-avg"),o=document.getElementById("mem-stat-max");n&&(n.textContent=e.toFixed(0)+" KB"),a&&(a.textContent=t.avg.toFixed(0)+" KB"),o&&(o.textContent=t.max.toFixed(0)+" KB")}}}const e=this.lastTelemetry?.vfd?.connected;if(this.history.spindle.length>0&&e){const e=this.history.spindle[this.history.spindle.length-1];if(t?this.graphs.spindle?.addDataPoint(e):this.graphs.spindle?.addDataPoint("Current",e),!t){const t=this.graphs.spindle?.getStats("Current");if(t){const i=document.getElementById("spindle-current");i&&(i.textContent=e.toFixed(2)+" A");const s=document.getElementById("spindle-bar"),n=document.getElementById("spindle-freq"),a=document.getElementById("spindle-thermal");if(s){const t=30,i=Math.min(e/t*100,100);s.style.width=i+"%",s.style.background=i>80?"var(--color-critical)":i>60?"var(--color-warning)":"var(--color-optimal)"}this.lastTelemetry&&this.lastTelemetry.vfd&&(n&&(n.textContent=this.lastTelemetry.vfd.frequency_hz.toFixed(1)+" Hz"),a&&(a.textContent=(this.lastTelemetry.vfd.thermal_percent||0)+"%"));const o=document.getElementById("spindle-stat-current"),r=document.getElementById("spindle-stat-avg"),d=document.getElementById("spindle-stat-max");o&&(o.textContent=e.toFixed(2)+" A"),r&&(r.textContent=t.avg.toFixed(2)+" A"),d&&(d.textContent=t.max.toFixed(2)+" A")}}}else e||(this.setNA(document.getElementById("spindle-stat-current")," A"),this.setNA(document.getElementById("spindle-stat-avg")," A"),this.setNA(document.getElementById("spindle-stat-max")," A"));if(this.history.temperature.length>0){const e=this.history.temperature[this.history.temperature.length-1];if(t?this.graphs.temperature?.addDataPoint(e):this.graphs.temperature?.addDataPoint("Temp",e),!t){const t=this.graphs.temperature?.getStats("Temp");if(t){const i=document.getElementById("temp-current"),s=document.getElementById("temp-stat-avg"),n=document.getElementById("temp-stat-max");i&&(i.textContent=e.toFixed(1)+" Â°C"),s&&(s.textContent=t.avg.toFixed(1)+" Â°C"),n&&(n.textContent=t.max.toFixed(1)+" Â°C")}}}if(this.history.latency.length>0&&!t){const t=this.history.latency[this.history.latency.length-1];this.graphs.latency?.addDataPoint("Latency",t);const e=this.graphs.latency?.getStats("Latency");if(e){const i=document.getElementById("latency-current"),s=document.getElementById("latency-stat-avg"),n=document.getElementById("latency-stat-max");i&&(i.textContent=t.toFixed(0)+" ms"),s&&(s.textContent=e.avg.toFixed(0)+" ms"),n&&(n.textContent=e.max.toFixed(0)+" ms")}}if(this.history.motion.length>0&&!t){const t=this.history.motion[this.history.motion.length-1],e=AppState.data.motion?.dro_connected??!1;this.updateHeaderNA("header-motion-load","Motion System Load",e);const i=e&&t.quality||0,s=e&&t.jitter||0;this.graphs.motion?.addDataPoint("Quality",i),this.graphs.motion?.addDataPoint("Jitter",s);const n=document.getElementById("motion-quality"),a=document.getElementById("motion-jitter");e?(this.setValue(n,i.toFixed(0)+"%"),this.setValue(a,s.toFixed(2)+" mm/s")):(this.setNA(n),this.setNA(a))}if(this.history.wifi.length>0&&!t){const t=this.history.wifi[this.history.wifi.length-1];this.graphs.wifi?.addDataPoint("Signal",t);const e=this.graphs.wifi?.getStats("Signal");if(e){const i=document.getElementById("wifi-current"),s=document.getElementById("wifi-stat-avg"),n=document.getElementById("wifi-stat-max");i&&(i.textContent=t.toFixed(0)+"%"),s&&(s.textContent=e.avg.toFixed(0)+"%"),n&&(n.textContent=e.max.toFixed(0)+"%")}}},exportGraphsData(){let t="Graph Data Export\nGenerated: "+(new Date).toLocaleString()+"\n\n";Object.entries(this.graphs).forEach(([e,i])=>{i&&"function"==typeof i.exportData&&(t+=`\n=== ${e.toUpperCase()} ===\n`,t+=i.exportData())});const e=new Blob([t],{type:"text/csv"}),i=window.URL.createObjectURL(e),s=document.createElement("a");s.href=i,s.download=`graphs-export-${Date.now()}.csv`,s.click(),window.URL.revokeObjectURL(i),AlertManager.add("Graph data exported","success",2e3)},cleanup(){console.log("[Dashboard] Cleaning up"),this.stateChangeHandler&&(window.removeEventListener("state-changed",this.stateChangeHandler),this.stateChangeHandler=null),this.updateInterval&&(clearInterval(this.updateInterval),this.updateInterval=null),Object.values(this.graphs).forEach(t=>{t&&"function"==typeof t.destroy&&t.destroy()}),this.graphs={}}},window.currentPageModule=DashboardModule;