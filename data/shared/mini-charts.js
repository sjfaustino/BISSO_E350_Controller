class MiniChart{constructor(t,i={}){this.container=document.getElementById(t),this.container?(this.options={width:i.width||300,height:i.height||150,maxDataPoints:i.maxDataPoints||60,lineColor:i.lineColor||"#3b82f6",fillColor:i.fillColor||"rgba(59, 130, 246, 0.1)",gridColor:i.gridColor||"rgba(128, 128, 128, 0.2)",textColor:i.textColor||"#666",min:void 0!==i.min?i.min:"auto",max:void 0!==i.max?i.max:"auto",unit:i.unit||"",showGrid:!1!==i.showGrid,showValues:!1!==i.showValues,smooth:!1!==i.smooth},this.data=[],this.canvas=null,this.ctx=null,this.animationFrame=null,this.init()):console.warn(`[MiniChart] Container ${t} not found`)}init(){this.canvas=document.createElement("canvas"),this.canvas.width=this.options.width,this.canvas.height=this.options.height,this.canvas.style.width="100%",this.canvas.style.height="auto",this.canvas.style.display="block",this.ctx=this.canvas.getContext("2d"),this.container.appendChild(this.canvas),this.options.showValues&&(this.valueDisplay=document.createElement("div"),this.valueDisplay.style.cssText="\n                margin-top: 8px;\n                display: flex;\n                justify-content: space-between;\n                font-size: 12px;\n                color: var(--text-secondary);\n            ",this.container.appendChild(this.valueDisplay)),this.render()}addDataPoint(t){this.data.push(t),this.data.length>this.options.maxDataPoints&&this.data.shift(),this.render()}render(){if(!this.ctx)return;const{width:t,height:i}=this.canvas,s=this.ctx;if(s.clearRect(0,0,t,i),this.data.length<2)return;let n="auto"===this.options.min?Math.min(...this.data):this.options.min,e="auto"===this.options.max?Math.max(...this.data):this.options.max;const a=e-n;if("auto"===this.options.min&&(n-=.1*a),"auto"===this.options.max&&(e+=.1*a),e===n&&(e=n+1),this.options.showGrid&&this.drawGrid(s,t,i,n,e),this.drawLine(s,t,i,n,e),this.options.showValues&&this.valueDisplay){const t=this.data[this.data.length-1],i=this.data.reduce((t,i)=>t+i,0)/this.data.length;this.valueDisplay.innerHTML=`\n                <span>Current: <strong>${t.toFixed(1)}${this.options.unit}</strong></span>\n                <span>Avg: <strong>${i.toFixed(1)}${this.options.unit}</strong></span>\n                <span>Max: <strong>${Math.max(...this.data).toFixed(1)}${this.options.unit}</strong></span>\n            `}}drawGrid(t,i,s,n,e){t.strokeStyle=this.options.gridColor,t.lineWidth=1,t.setLineDash([2,2]);for(let n=0;n<=4;n++){const e=s/4*n;t.beginPath(),t.moveTo(0,e),t.lineTo(i,e),t.stroke()}t.setLineDash([])}drawLine(t,i,s,n,e){const a=e-n,o=i/(this.options.maxDataPoints-1);t.beginPath(),this.data.forEach((i,e)=>{const h=e*o,r=s-(i-n)/a*s;if(0===e)t.moveTo(h,r);else if(this.options.smooth){const i=(e-1)*o,l=s-(this.data[e-1]-n)/a*s,d=(i+h)/2,c=(l+r)/2;t.quadraticCurveTo(i,l,d,c)}else t.lineTo(h,r)}),this.options.fillColor&&(t.lineTo(i,s),t.lineTo(0,s),t.closePath(),t.fillStyle=this.options.fillColor,t.fill()),t.strokeStyle=this.options.lineColor,t.lineWidth=2,t.stroke()}destroy(){this.animationFrame&&cancelAnimationFrame(this.animationFrame),this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.valueDisplay&&this.valueDisplay.parentNode&&this.valueDisplay.parentNode.removeChild(this.valueDisplay)}}class MiniMultiChart{constructor(t,i={}){this.container=document.getElementById(t),this.container?(this.options={width:i.width||400,height:i.height||200,maxDataPoints:i.maxDataPoints||60,series:i.series||[],gridColor:i.gridColor||"rgba(128, 128, 128, 0.2)",textColor:i.textColor||"#666",min:void 0!==i.min?i.min:"auto",max:void 0!==i.max?i.max:"auto",showGrid:!1!==i.showGrid,showLegend:!1!==i.showLegend},this.seriesData=new Map,this.canvas=null,this.ctx=null,this.init()):console.warn(`[MiniMultiChart] Container ${t} not found`)}init(){this.canvas=document.createElement("canvas"),this.canvas.width=this.options.width,this.canvas.height=this.options.height,this.canvas.style.width="100%",this.canvas.style.height="auto",this.canvas.style.display="block",this.ctx=this.canvas.getContext("2d"),this.container.appendChild(this.canvas),this.options.showLegend&&(this.legend=document.createElement("div"),this.legend.style.cssText="\n                margin-top: 8px;\n                display: flex;\n                gap: 16px;\n                flex-wrap: wrap;\n                font-size: 12px;\n            ",this.container.appendChild(this.legend)),this.options.series.forEach(t=>{this.seriesData.set(t.name,[])}),this.render()}addDataPoint(t,i){if(!this.seriesData.has(t))return void console.warn(`[MiniMultiChart] Series ${t} not found`);const s=this.seriesData.get(t);s.push(i),s.length>this.options.maxDataPoints&&s.shift(),this.render()}render(){if(!this.ctx)return;const{width:t,height:i}=this.canvas,s=this.ctx;s.clearRect(0,0,t,i);let n=[];if(this.seriesData.forEach(t=>n.push(...t)),n.length<2)return;let e="auto"===this.options.min?Math.min(...n):this.options.min,a="auto"===this.options.max?Math.max(...n):this.options.max;const o=a-e;"auto"===this.options.min&&(e-=.1*o),"auto"===this.options.max&&(a+=.1*o),a===e&&(a=e+1),this.options.showGrid&&this.drawGrid(s,t,i),this.options.series.forEach(n=>{const o=this.seriesData.get(n.name);o&&o.length>0&&this.drawSeries(s,t,i,e,a,o,n.color)}),this.options.showLegend&&this.legend&&this.updateLegend()}drawGrid(t,i,s){t.strokeStyle=this.options.gridColor,t.lineWidth=1,t.setLineDash([2,2]);for(let n=0;n<=4;n++){const e=s/4*n;t.beginPath(),t.moveTo(0,e),t.lineTo(i,e),t.stroke()}t.setLineDash([])}drawSeries(t,i,s,n,e,a,o){const h=e-n,r=i/(this.options.maxDataPoints-1);t.beginPath(),a.forEach((i,e)=>{const a=e*r,o=s-(i-n)/h*s;0===e?t.moveTo(a,o):t.lineTo(a,o)}),t.strokeStyle=o,t.lineWidth=2,t.stroke()}updateLegend(){this.legend.innerHTML=this.options.series.map(t=>{const i=this.seriesData.get(t.name),s=i.length>0?i[i.length-1]:0;return`\n                <div style="display: flex; align-items: center; gap: 6px;">\n                    <div style="width: 12px; height: 12px; background: ${t.color}; border-radius: 2px;"></div>\n                    <span style="color: var(--text-secondary);">${t.name}: <strong>${s.toFixed(1)}</strong></span>\n                </div>\n            `}).join("")}destroy(){this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.legend&&this.legend.parentNode&&this.legend.parentNode.removeChild(this.legend)}}window.MiniChart=MiniChart,window.MiniMultiChart=MiniMultiChart;